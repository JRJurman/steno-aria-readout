<head>
  <title>Steno Aria Readout</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">

  <style>
    :root {
      color-scheme: dark;
    }

    body {
      font-family: "Montserrat", sans-serif;
      font-optical-sizing: auto;
      font-style: normal;
    }
  </style>

</head>

<textarea id="input" autofocus style="width: 100%; height: 100px;"></textarea>

<input id="timeoutInput" type="number" size="6" value="1000">

<div id="live" aria-label="" aria-live="assertive" role="presentation"></div>

<script>
  const input = document.getElementById('input');
  const live = document.getElementById('live');

  window.cursorPosition = 0
  window.typing = 0;

  input.addEventListener('keyup', () => {
    window.typing++;
    setTimeout(() => {
      window.typing--
      if (window.typing === 0) {
        live.textContent = input.value.substring(window.cursorPosition, input.value.length);
        window.cursorPosition = input.value.length;
      }
    }, timeoutInput.value);
  });
</script>
